<project name="beeplib" default="jar" basedir=".">
    <property name="app.name"   value="beeplib" />
    <property name="build.dir"  value="build" />
    <property name="doc.dir"  value="doc" />
    <property name="example.dir"  value="example" />
    <property name="src.dir"  value="src" />
    <property name="test.dir"  value="test" />

    <target name="core">
        <mkdir dir="${build.dir}/classes"/>
        <javac srcdir="${src.dir}/" destdir="${build.dir}/classes" >
            <include name="**/core/*.java"/>
        </javac>
    </target>

    <target name="compile" depends="core">
        <mkdir dir="${build.dir}/classes"/>
        <javac srcdir="${src.dir}/" destdir="${build.dir}/classes" >
            <include name="**/*.java"/>
        </javac>
    </target>

    <target name="build-example" depends="compile">
        <mkdir dir="${build.dir}/classes"/>
        <javac srcdir="${example.dir}/" destdir="${build.dir}/classes" >
            <include name="**/*.java"/>
        </javac>
    </target>

    <target name="build-test" depends="compile">
        <mkdir dir="${build.dir}/classes"/>
        <javac srcdir="${test.dir}/" destdir="${build.dir}/classes" >
            <include name="**/*.java"/>
        </javac>
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${build.dir}/lib"/>
        <jar jarfile="${build.dir}/lib/${app.name}.jar" basedir="${build.dir}/classes">
             <include name="org/**/*.class"/>
	     <exclude name="**/example/*"/>
	     <exclude name="**/test/*"/>
	</jar>
    </target>

    <target name="doc" depends="compile">
        <mkdir dir="${doc.dir}"/>
	<javadoc sourcepath="${src.dir}/" destdir="${doc.dir}"
		 author="false"
		 version="false"
		 Overview="${src.dir}/overview.html"
		 packagenames="org.beepcore.beep.core,org.beepcore.beep.util,org.beepcore.beep.transport.tcp,org.beepcore.beep.lib,org.beepcore.beep.profile,org.beepcore.beep.profile.tls">
		 <link offline="true" href="http://java.sun.com/products/jdk/1.3/docs/api" packagelistLoc="doc/jdk" />
		 <link offline="true" href="http://java.sun.com/products/jsse/doc/apidoc" packagelistLoc="doc/jsse" />
	         <classpath>
		         <pathelement path="${java.class.path}"/>
		         <pathelement location="${build.dir}/lib/${app.name}.jar"/>
                 </classpath>
        </javadoc>
    </target>

    <target name="clean">
        <delete dir="${build.dir}" />
        <delete dir="${doc.dir}" />
    </target>
</project>
